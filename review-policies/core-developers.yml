policy:
  approval:
  - and:
    - one core developer approval
    - two approvals from anyone
  - devops approval for CI/CD changes

  # Rules for disapproving
  disapproval:
    options:
      # Both disapproving and approving should be handled through the GitHub UI
      methods:
        disapprove:
          github_review: true

        revoke:
          github_review: true

    # Any python-discord organisation member can leave a disapproving review
    requires:
      organizations: ["python-discord"]


approval_rules:
- name: one core developer approval
  requires:
    count: 1
    teams:
    - "python-discord/core-developers"
  options:
    ignore_update_merges: true
- name: two approvals from anyone
  requires:
    count: 2
    organizations: ["python-discord"]
    users:
      - ByteCommander
      - mathsman5133
      - slushiegoose
      - JonasUJ
      - F4zii
      - kingdom5500
      - hedythedev
      - Refisio
      - riffautae
  options:
    ignore_update_merges: true
- name: devops approval for CI/CD changes
  requires:
    count: 1
    teams:
    - "python-discord/devops"
  if:
    changed_files:
      paths:
        - ".github/workflows/*"
        - "Dockerfile"
  options:
    request_review:
      enabled: true
      mode: team
      
    ignore_update_merges: true
